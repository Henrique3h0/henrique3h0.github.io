<!DOCTYPE html>
<html lang="pt-br">
    <link rel="stylesheet" href="/index.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.10/dist/sweetalert2.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.10/dist/sweetalert2.all.min.js"></script>
<script>
    function notify(title, text, timer = 5000, icon = 'success') {
        Swal.fire({
          title: title,
          text: text,
          toast: false,
          timer: timer,
          showConfirmButton: false,
          heightAuto: false,
          customClass: {
            title: 'swal-title',
            icon: 'swal-icon',
            popup: 'swal-bg'
          },
          background: '#0c0c0c',
          icon: icon,
          confirmButtonColor: '#3085d6',
          height: '20rem',
          width: '30rem'
        });
      }

    var url = "/url.txt";
    var portfolio = "https://a.a";
    fetch(url)
        .then(response => {
            if (!response.ok) {
                throw new Error('Erro ao obter o arquivo');
            }
            return response.text();
        })
        .then(text => {
            portfolio = text
        })
        .catch(error => {
            console.error('Erro:', error);
        });

    function verificarStatusPagina() {
        $.ajax({
            url: portfolio+"/healthcheck",
            type: 'GET',
            complete: function (xhr) {
                if (xhr.status == 200 && xhr.responseText.trim() == "ok") {
                    notify("SISTEMA", "Portfolio online, encaminhando...")
                    setTimeout(function () { window.location.href = portfolio; }, 1500)
                    return true;
                } else {
                    notify("SISTEMA", "Portfolio offline, estamos em manutenção, tente mais tarde... (enviando para curriculo)", 5000, 'error')
                    setTimeout(function () { window.location.href = '/index.html'; }, 4000)
                    return false;
                }
            }
        });
    }

    verificarStatusPagina();
</script>